{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input } from '@angular/core';\nimport { FileUploader } from 'ng2-file-upload';\nimport { take } from 'rxjs/operators';\nimport { environment } from 'src/environments/environment';\nlet PhotoEditorComponent = class PhotoEditorComponent {\n  constructor(accountService) {\n    this.accountService = accountService;\n    this.hasBaseDropzoneOver = false;\n    this.baseUrl = environment.apiUrl;\n    this.accountService.currentUser$.pipe(take(1)).subscribe(user => this.user = user);\n  }\n\n  ngOnInit() {\n    this.initializeUploader();\n  } // tslint:disable-next-line: typedef\n\n\n  fileOverBase(e) {\n    this.hasBaseDropzoneOver = e;\n  } // tslint:disable-next-line: typedef\n\n\n  initializeUploader() {\n    this.uploader = new FileUploader({\n      url: this.baseUrl + 'users/add-photo',\n      authToken: 'Bearer ' + this.user.token,\n      isHTML5: true,\n      allowedFileType: ['image'],\n      removeAfterUpload: true,\n      autoUpload: false,\n      maxFileSize: 10 * 1024 * 1024\n    });\n\n    this.uploader.onAfterAddingAll = file => {\n      file.withCredentials = false;\n    };\n\n    this.uploader.onSuccessItem = (item, response, status, headers) => {\n      if (response) {\n        const photo = JSON.parse(response);\n        this.member.photos.push(photo);\n      }\n    };\n  }\n\n};\n\n__decorate([Input()], PhotoEditorComponent.prototype, \"member\", void 0);\n\nPhotoEditorComponent = __decorate([Component({\n  selector: 'app-photo-editor',\n  templateUrl: './photo-editor.component.html',\n  styleUrls: ['./photo-editor.component.css']\n})], PhotoEditorComponent);\nexport { PhotoEditorComponent };","map":null,"metadata":{},"sourceType":"module"}